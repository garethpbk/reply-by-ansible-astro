---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

// Get recent episodes (5 most recent)
const allEpisodes = await getCollection('episodes');
const recentEpisodes = allEpisodes
  .sort((a: CollectionEntry<'episodes'>, b: CollectionEntry<'episodes'>) => b.data.episodeNumber - a.data.episodeNumber)
  .slice(0, 5);
---

<footer class="footer">
  <div class="footer-container">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Recent Episodes</h3>
        <ul class="episodes-list">
          {recentEpisodes.map((episode: CollectionEntry<'episodes'>) => (
            <li>{episode.data.title}</li>
          ))}
        </ul>
      </div>

      <div class="footer-section">
        <h3>Pages</h3>
        <ul class="pages-list">
          <li><a href="/">Home</a></li>
          <li><a href="/episodes">Episodes</a></li>
          <li><a href="/about">About</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h3>Follow Our Podcast</h3>
        <div class="podcast-platforms">
          <a href="https://podcasts.apple.com" target="_blank" rel="noopener noreferrer" aria-label="Apple Podcasts">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.182c5.423 0 9.818 4.395 9.818 9.818 0 5.423-4.395 9.818-9.818 9.818-5.423 0-9.818-4.395-9.818-9.818 0-5.423 4.395-9.818 9.818-9.818zM12 5.727c-1.964 0-3.545 1.582-3.545 3.546 0 1.398.79 2.6 1.96 3.18v4.365c0 .487.396.91.91.91h1.273c.514 0 .91-.423.91-.91v-4.366c1.17-.58 1.96-1.78 1.96-3.18 0-1.963-1.582-3.545-3.545-3.545zm0 1.636c1.06 0 1.91.85 1.91 1.91s-.85 1.909-1.91 1.909-1.91-.85-1.91-1.91.85-1.91 1.91-1.91z"/></svg>
          </a>
          <a href="https://open.spotify.com" target="_blank" rel="noopener noreferrer" aria-label="Spotify">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
          </a>
          <a href="https://www.google.com/podcasts" target="_blank" rel="noopener noreferrer" aria-label="Google Podcasts">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zM9.5 7.5v9c0 .552-.448 1-1 1s-1-.448-1-1v-9c0-.552.448-1 1-1s1 .448 1 1zm3.5-3v15c0 .552-.448 1-1 1s-1-.448-1-1v-15c0-.552.448-1 1-1s1 .448 1 1zm3.5 5.5v6c0 .552-.448 1-1 1s-1-.448-1-1v-6c0-.552.448-1 1-1s1 .448 1 1z"/></svg>
          </a>
          <a href="https://www.youtube.com" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          </a>
          <a href="https://overcast.fm" target="_blank" rel="noopener noreferrer" aria-label="Overcast">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 24C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm0-2.667c5.155 0 9.333-4.178 9.333-9.333S17.155 2.667 12 2.667 2.667 6.845 2.667 12 6.845 21.333 12 21.333zm-1.333-6c0 .736.597 1.334 1.333 1.334s1.333-.598 1.333-1.334v-6.666c0-.736-.597-1.334-1.333-1.334s-1.333.598-1.333 1.334v6.666z"/></svg>
          </a>
          <a href="https://pocketcasts.com" target="_blank" rel="noopener noreferrer" aria-label="Pocket Casts">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zm0 2.182c5.423 0 9.818 4.395 9.818 9.818 0 5.423-4.395 9.818-9.818 9.818-5.423 0-9.818-4.395-9.818-9.818 0-5.423 4.395-9.818 9.818-9.818zM12 5.727c-3.455 0-6.273 2.818-6.273 6.273h1.637c0-2.56 2.076-4.636 4.636-4.636s4.636 2.076 4.636 4.636h1.637c0-3.455-2.818-6.273-6.273-6.273zm0 3.273c-1.655 0-3 1.345-3 3h1.636c0-.754.61-1.364 1.364-1.364s1.364.61 1.364 1.364H15c0-1.655-1.345-3-3-3z"/></svg>
          </a>
          <a href="/rss" target="_blank" rel="noopener noreferrer" aria-label="RSS Feed">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368C10.58.068 21.785 11.214 21.966 21.783h-4.811c-.062-8.71-7.118-15.758-15.839-15.82V4.812z"/></svg>
          </a>
          <a href="https://castbox.fm" target="_blank" rel="noopener noreferrer" aria-label="Castbox">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zm6.327 8.4c.273.273.273.727 0 1-.136.137-.318.2-.5.2s-.364-.063-.5-.2l-1.418-1.418c-.91.682-2.019 1.09-3.218 1.09-2.982 0-5.4-2.418-5.4-5.4h1.8c0 1.991 1.609 3.6 3.6 3.6.864 0 1.655-.309 2.282-.818L12.555 4.036c-.273-.273-.273-.727 0-1 .273-.273.727-.273 1 0l1.418 1.418c.509-.627.818-1.418.818-2.282 0-1.991-1.609-3.6-3.6-3.6v-1.8c2.982 0 5.4 2.418 5.4 5.4 0 1.2-.409 2.309-1.091 3.218l1.418 1.418z"/></svg>
          </a>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2025 Reply By Ansible. All Rights Reserved.</p>
    </div>
  </div>
</footer>

<style>
  .footer {
    background-color: #050812;
    color: #e8edf5;
    padding: 4rem 2rem 2rem;
    border-top: 1px solid rgba(0, 217, 255, 0.2);
  }

  .footer-container {
    max-width: 1280px;
    margin: 0 auto;
  }

  .footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 3rem;
    margin-bottom: 3rem;
  }

  .footer-section h3 {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.25rem;
    font-weight: 600;
    color: #00d9ff;
    margin-bottom: 1.5rem;
    letter-spacing: 0.05em;
  }

  .episodes-list,
  .pages-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .episodes-list li,
  .pages-list li {
    margin-bottom: 0.75rem;
    font-family: 'Rajdhani', sans-serif;
    font-size: 1rem;
    color: rgba(232, 237, 245, 0.8);
  }

  .pages-list a {
    color: rgba(232, 237, 245, 0.8);
    transition: color 0.2s ease;
  }

  .pages-list a:hover {
    color: #00d9ff;
  }

  .podcast-platforms {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
  }

  .podcast-platforms a {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 217, 255, 0.08);
    border: 1px solid rgba(0, 217, 255, 0.2);
    border-radius: 8px;
    color: #00d9ff;
    transition: all 0.3s ease;
  }

  .podcast-platforms a:hover {
    background: rgba(0, 217, 255, 0.15);
    border-color: #00d9ff;
    transform: translateY(-2px);
  }

  .podcast-platforms svg {
    width: 24px;
    height: 24px;
  }

  .footer-bottom {
    padding-top: 2rem;
    border-top: 1px solid rgba(0, 217, 255, 0.1);
    text-align: center;
  }

  .footer-bottom p {
    font-family: 'Rajdhani', sans-serif;
    font-size: 0.875rem;
    color: rgba(232, 237, 245, 0.6);
    margin: 0;
  }

  @media (max-width: 767px) {
    .footer {
      padding: 3rem 1rem 1.5rem;
    }

    .footer-content {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .podcast-platforms {
      grid-template-columns: repeat(4, 1fr);
    }

    .podcast-platforms a {
      width: 44px;
      height: 44px;
    }
  }
</style>
